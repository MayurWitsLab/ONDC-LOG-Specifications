search:
  message:
    intent:
      fulfillment:
        location:
          area_code:
            required: optional
            reference: if any
            usage: 560001
            description: Area code
          gps:
            required: mandatory
            reference: if any
            usage: 12.974002,77.613458
            description: Gps
        type:
          required: optional
          reference: if any
          usage: Delivery
          description: Type of fulfillment
      item:
        category:
          required: optional
          reference: if any
          usage: Foodgrains
          description: Category of item
      tags:
        buyer_id:
          required: mandatory
          reference: if any
          usage: xxxxxxxxxxxxxxx
          description: Category of item
on_search:
  message:
    catalog:
      descriptor: &descriptor
        $ref: './descriptor.yaml'
      providers: 
        id: &id
          required: mandatory
          description: Unique human readable ID.
          reference: if any
          usage: P1
        descriptor: *descriptor
        additional_desc:
          required: optional
          description: Additional description
          reference: if any
          usage: chat link
        creds: &creds
          $ref: './creds.yaml'
        offers:
          required: optional
          description: Offers info
          reference: if any
          usage: chat link
      items:
        tags:
          veg_nonveg:
            required: optional
            description: Tags info
            reference: if any
            usage: veg
          image:
            required: optional
            description: Tags info
            reference: if any
            usage: veg
          price_slab:
            required: optional
            description: Tags info
            reference: if any
            usage: 175
select:
  message:
    order:
      provider:
        id: *id
      payments: 
        type: &type
          required: optional
          description: type of the payment
          reference: if any
          usage: ON-FULFILLMENT
on_select:
  message:
    order:
      provider:
        id: *id
      items:
        id: *id
init: 
  message:
    order:
      provider:
        id: *id 
        ttl:
          required: optional
          description: ttl
          reference: if any
          usage: P1D 
      items:
        id: *id 
        add-ons:
          id: 
            required: optional
            description: Id of add-ons
            reference: if any
            usage: 78787723
        tags:
          BUYER_TERMS:
            required: optional
            description: Tags info
            reference: if any
            usage: free text on Item Customization
      fulfillments:
        customer:
          person:
            creds: *creds
        tags:
          DELIVERY_TERMS:
            required: optional
            description: Tags info
            reference: if any
            usage: CIF
      billing: &billing
        $ref: './billing.yaml'

on_init:
  message:
    order:
      provider:
        id: *id 
      items:
        id: *id 
        add-ons:
          id: 
            required: optional
            description: Id of add-ons
            reference: if any
            usage: 78787723
        tags:
          BUYER_TERMS:
            required: optional
            description: Tags info
            reference: if any
            usage: free text on Item Customization
          DELIVERY_TERMS:
            required: optional
            description: Tags info
            reference: if any
            usage: CIF
      billing: *billing
confirm:
  message:
    order:
      provider:
        id: *id
      items:
        id: *id
      billing: *billing
      fulfillments: &fulfillments
        $ref: './fulfillments.yaml'    
on_confirm:
  message:
    order:
      provider:
        id: *id
      items:
        id: *id
      billing: *billing
      fulfillments: *fulfillments
update:
  message:
    order:
      provider:
        id: *id
      items:
        id: *id
on_update:
  message:
    order:
      provider:
        id: *id
      items:
        id: *id